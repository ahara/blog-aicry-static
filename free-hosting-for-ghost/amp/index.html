<head>
    <meta charset="utf-8">

    <title>Free hosting for Ghost</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

    <link rel="shortcut icon" href="../../favicon.ico">

    <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon">
    <link rel="canonical" href="../index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta property="og:site_name" content="aicry">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Free hosting for Ghost">
    <meta property="og:description" content="This post won't be related to main blog topics. However, recently Red Hat has closed OpenShift v2 platform where my blog was hosted and I had to migrate it to the new version or find another hosting. Finally, I decided to try with OpenShift v3. Luckily, Red Hat prepared a">
    <meta property="og:url" content="http://localhost:2368/free-hosting-for-ghost/">
    <meta property="og:image" content="http://localhost:2368/content/images/2017/11/OpenShift-LogoType.svg">
    <meta property="article:published_time" content="2017-11-06T12:02:17.000Z">
    <meta property="article:modified_time" content="2017-11-15T18:04:13.000Z">
    <meta property="article:tag" content="Ghost">
    <meta property="article:tag" content="Free hosting">
    <meta property="article:tag" content="Blog">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free hosting for Ghost">
    <meta name="twitter:description" content="This post won't be related to main blog topics. However, recently Red Hat has closed OpenShift v2 platform where my blog was hosted and I had to migrate it to the new version or find another hosting. Finally, I decided to try with OpenShift v3. Luckily, Red Hat prepared a">
    <meta name="twitter:url" content="http://localhost:2368/free-hosting-for-ghost/">
    <meta name="twitter:image" content="http://localhost:2368/content/images/2017/11/OpenShift-LogoType.svg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Adam Harasimowicz">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="Ghost, Free hosting, Blog">
    <meta name="twitter:site" content="@adharasim">
    <meta name="twitter:creator" content="@adharasim">
    <meta property="og:image:width" content="719">
    <meta property="og:image:height" content="768">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "aicry",
        "logo": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/favicon.ico",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Adam Harasimowicz",
        "image": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/content/images/2017/11/pict_bw_small-1.jpg",
            "width": 96,
            "height": 96
        },
        "url": "http://localhost:2368/author/adam/",
        "sameAs": [
            "https://twitter.com/adharasim"
        ]
    },
    "headline": "Free hosting for Ghost",
    "url": "http://localhost:2368/free-hosting-for-ghost/",
    "datePublished": "2017-11-06T12:02:17.000Z",
    "dateModified": "2017-11-15T18:04:13.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:2368/content/images/2017/11/OpenShift-LogoType.svg",
        "width": 719,
        "height": 768
    },
    "keywords": "Ghost, Free hosting, Blog",
    "description": "This post won&#x27;t be related to main blog topics. However, recently Red Hat has closed OpenShift v2 platform where my blog was hosted and I had to migrate it to the new version or find another hosting. Finally, I decided to try with OpenShift v3. Luckily, Red Hat prepared a",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368/"
    }
}
    </script>

    <meta name="generator" content="Ghost 1.17">
    <link rel="alternate" type="application/rss+xml" title="aicry" href="../../rss/index.html">

    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,600,400">
    <style amp-custom>html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{margin:0.67em 0;font-size:2em}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{position:relative;vertical-align:baseline;font-size:75%;line-height:0}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}amp-img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace, monospace;font-size:1em}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{cursor:pointer;-webkit-appearance:button}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{margin:0 2px;padding:0.35em 0.625em 0.75em;border:1px solid #c0c0c0}legend{padding:0;border:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-spacing:0;border-collapse:collapse}td,th{padding:0}html{max-height:100%;height:100%;font-size:62.5%;-webkit-tap-highlight-color:rgba(0, 0, 0, 0)}body{max-height:100%;height:100%;color:#3a4145;background:#f4f8fb;letter-spacing:0.01rem;font-family:"Merriweather", serif;font-size:1.8rem;line-height:1.75em;text-rendering:geometricPrecision;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1}::-moz-selection{background:#d6edff}::selection{background:#d6edff}h1,h2,h3,h4,h5,h6{margin:0 0 0.3em 0;color:#2e2e2e;font-family:"Open Sans", sans-serif;line-height:1.15em;text-rendering:geometricPrecision;-webkit-font-feature-settings:"dlig" 1, "liga" 1, "lnum" 1, "kern" 1;-moz-font-feature-settings:"dlig" 1, "liga" 1, "lnum" 1, "kern" 1;-o-font-feature-settings:"dlig" 1, "liga" 1, "lnum" 1, "kern" 1}h1{text-indent:-2px;letter-spacing:-1px;font-size:2.6rem}h2{letter-spacing:0;font-size:2.4rem}h3{letter-spacing:-0.6px;font-size:2.1rem}h4{font-size:1.9rem}h5{font-size:1.8rem}h6{font-size:1.8rem}a{color:#4a4a4a}a:hover{color:#111}p,ul,ol,dl{margin:0 0 2.5rem 0;font-size:1.5rem;text-rendering:geometricPrecision;-webkit-font-feature-settings:"liga" 1, "onum" 1, "kern" 1;-moz-font-feature-settings:"liga" 1, "onum" 1, "kern" 1;-o-font-feature-settings:"liga" 1, "onum" 1, "kern" 1}ol,ul{padding-left:2em}ol ol,ul ul,ul ol,ol ul{margin:0 0 0.4em 0;padding-left:2em}dl dt{float:left;clear:left;overflow:hidden;margin-bottom:1em;width:180px;text-align:right;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd{margin-bottom:1em;margin-left:200px}li{margin:0.4em 0}li li{margin:0}hr{display:block;margin:1.75em 0;padding:0;height:1px;border:0;border-top:#efefef 1px solid}blockquote{box-sizing:border-box;margin:1.75em 0 1.75em 0;padding:0 0 0 1.75em;border-left:#4a4a4a 0.4em solid;-moz-box-sizing:border-box}blockquote p{margin:0.8em 0;font-style:italic}blockquote small{display:inline-block;margin:0.8em 0 0.8em 1.5em;color:#ccc;font-size:0.9em}blockquote small:before{content:"\2014 \00A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:normal}mark{background-color:#fdffb6}code,tt{padding:1px 3px;border:#e3edf3 1px solid;background:#f7fafb;border-radius:2px;white-space:pre-wrap;font-family:Inconsolata, monospace, sans-serif;font-size:0.85em;font-feature-settings:"liga" 0;-webkit-font-feature-settings:"liga" 0;-moz-font-feature-settings:"liga" 0}pre{overflow:auto;box-sizing:border-box;margin:0 0 1.75em 0;padding:10px;width:100%;border:#e3edf3 1px solid;background:#f7fafb;border-radius:3px;white-space:pre;font-family:Inconsolata, monospace, sans-serif;font-size:0.9em;-moz-box-sizing:border-box}pre code,pre tt{padding:0;border:none;background:transparent;white-space:pre-wrap;font-size:inherit}kbd{display:inline-block;margin-bottom:0.4em;padding:1px 8px;border:#ccc 1px solid;background:#f4f4f4;border-radius:4px;box-shadow:0 1px 0 rgba(0, 0, 0, 0.2), 0 1px 0 0 #fff inset;color:#666;text-shadow:#fff 0 1px 0;font-size:0.9em;font-weight:700}table{box-sizing:border-box;margin:1.75em 0;max-width:100%;width:100%;background-color:transparent;-moz-box-sizing:border-box}table th,table td{padding:8px;border-top:#efefef 1px solid;vertical-align:top;text-align:left;line-height:20px}table th{color:#000}table caption + thead tr:first-child th,table caption + thead tr:first-child td,table colgroup + thead tr:first-child th,table colgroup + thead tr:first-child td,table thead:first-child tr:first-child th,table thead:first-child tr:first-child td{border-top:0}table tbody + tbody{border-top:#efefef 2px solid}table table table{background-color:#fff}table tbody > tr:nth-child(odd) > td,table tbody > tr:nth-child(odd) > th{background-color:#f6f6f6}table.plain tbody > tr:nth-child(odd) > td,table.plain tbody > tr:nth-child(odd) > th{background:transparent}iframe,amp-iframe,.fluid-width-video-wrapper{display:block;margin:1.75em 0}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper amp-iframe{margin:0}textarea,select,input{margin:0 0 5px 0;padding:6px 9px;width:260px;outline:0;border:#e7eef2 1px solid;background:#fff;border-radius:4px;box-shadow:none;font-family:"Open Sans", sans-serif;font-size:1.6rem;line-height:1.4em;font-weight:100;-webkit-appearance:none}textarea{min-width:250px;min-height:80px;max-width:340px;width:100%;height:auto}input[type="text"]:focus,input[type="email"]:focus,input[type="search"]:focus,input[type="tel"]:focus,input[type="url"]:focus,input[type="password"]:focus,input[type="number"]:focus,input[type="date"]:focus,input[type="month"]:focus,input[type="week"]:focus,input[type="time"]:focus,input[type="datetime"]:focus,input[type="datetime-local"]:focus,textarea:focus{outline:none;outline-width:0;border:#bbc7cc 1px solid;background:#fff}select{width:270px;height:30px;line-height:30px}.clearfix:before,.clearfix:after{content:" ";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.main-header{position:relative;display:table;overflow:hidden;box-sizing:border-box;width:100%;height:50px;background:#5ba4e5 no-repeat center center;background-size:cover;text-align:left;-webkit-box-sizing:border-box;-moz-box-sizing:border-box}.content{background:#fff;padding-top:15px}.blog-title,.content{margin:auto;max-width:600px}.blog-title a{display:block;padding-right:16px;padding-left:16px;height:50px;color:#fff;text-decoration:none;font-family:"Open Sans", sans-serif;font-size:16px;line-height:50px;font-weight:600}.post{position:relative;margin-top:0;margin-right:16px;margin-left:16px;padding-bottom:0;max-width:100%;border-bottom:#ebf2f6 1px solid;word-wrap:break-word;font-size:0.95em;line-height:1.65em}.post-header{margin-bottom:1rem}.post-title{margin-bottom:0}.post-title a{text-decoration:none}.post-meta{display:block;margin:3px 0 0 0;color:#9eabb3;font-family:"Open Sans", sans-serif;font-size:1.3rem;line-height:2.2rem}.post-meta a{color:#9eabb3;text-decoration:none}.post-meta a:hover{text-decoration:underline}.post-meta .author{margin:0;font-size:1.3rem;line-height:1.3em}.post-date{display:inline-block;text-transform:uppercase;white-space:nowrap;font-size:1.2rem;line-height:1.2em}.post-image{margin:0;padding-top:3rem;padding-bottom:30px;border-top:1px #E8E8E8 solid}.post-content amp-img,.post-content amp-anim{position:relative;left:50%;display:block;padding:0;min-width:0;max-width:112%;width:calc(100% + 32px);height:auto;transform:translateX(-50%);-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%)}.footnotes{font-size:1.3rem;line-height:1.6em;font-style:italic}.footnotes li{margin:0.6rem 0}.footnotes p{margin:0}.footnotes p a:last-child{text-decoration:none}.site-footer{position:relative;margin:0 auto 20px auto;padding:1rem 15px;max-width:600px;color:rgba(0,0,0,0.5);font-family:"Open Sans", sans-serif;font-size:1.1rem;line-height:1.75em}.site-footer a{color:rgba(0,0,0,0.5);text-decoration:none;font-weight:bold}.site-footer a:hover{border-bottom:#bbc7cc 1px solid}.poweredby{display:block;float:right;width:45%;text-align:right}.copyright{display:block;float:left;width:45%}</style>

    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>

    

</head>

<body class="amp-template">
    <header class="main-header">
        <nav class="blog-title">
            <a href="../../">aicry</a>
        </nav>
    </header>

    <main class="content" role="main">
        <article class="post">

            <header class="post-header">
                <h1 class="post-title">Free hosting for Ghost</h1>
                <section class="post-meta">
                    <p class="author">by <a href="../../author/adam/">Adam Harasimowicz</a></p>
                    <time class="post-date" datetime="2017-11-06">2017-11-06</time>
                </section>
            </header>
            <figure class="post-image">
                <amp-img src="http://localhost:2368/content/images/2017/11/OpenShift-LogoType.svg" width="600" height="400" layout="responsive"></amp-img>
            </figure>
            <section class="post-content">

                <div class="kg-card-markdown"><p>This post won't be related to main blog topics. However, recently Red Hat has closed OpenShift v2 platform where my blog was hosted and I had to migrate it to the new version or find another hosting. Finally, I decided to try with OpenShift v3.</p>
<p>Luckily, Red Hat prepared a helpful <a href="https://blog.openshift.com/migrating-ghost-app-openshift-3/">tutorial about Ghost and the migration</a>, but there were some parts which were missed when you wanted to use free tier, private git repository or your custom domain. Thus, I will try to give some hints here to make installation easier.</p>
<p>Also, if you want to start new blog and you are not interested in migration, I think that still it can be very helpful for you.</p>
<p>The whole tutorial can be a little bit rough, but I hope that you will find it helpful.</p>
<h3 id="prerequirements">Pre requirements</h3>
<p>At the beginning, I suggest to start with reading the Red Hat tutorial and get familiar with it. There is not need to follow the steps from it as they will be presented here in extended form, but reading explanations prepared by Red Hat can be helpful to understand more.</p>
<p>Next, download from Red Hat page the oc program and login - required command and token/password, you will find on <a href="https://console.starter-us-east-1.openshift.com/console/command-line">https://console.starter-us-east-1.openshift.com/console/command-line</a>.</p>
<pre><code class="language-bash">oc login https://api.starter-us-east-1.openshift.com --token=&lt;hidden&gt;
</code></pre>
<h3 id="setupmysql">Setup MySQL</h3>
<p>With the free tier, you are allowed to run two machines (pods). First of them, we will use to prepare database. So create a project and MySQL DB.</p>
<pre><code class="language-bash">oc new-project &lt;project-name&gt;
oc new-app mysql-persistent
</code></pre>
<p>Remember to save output from the command above as there will be login details to MySQL.</p>
<h3 id="coderepository">Code repository</h3>
<p>Create <a href="https://bitbucket.org/">BitBucket</a> repository with your blog code. Eventually, if you are starting from scratch, you can obtain code from the official <a href="https://github.com/TryGhost/Ghost">Ghost repo</a>.</p>
<p>Next, generate SSH key pair.</p>
<pre><code class="language-bash">ssh-keygen -t rsa -b 4096 -C -f &lt;key name&gt; "your_email@example.com"
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/&lt;key-name&gt;
</code></pre>
<p>If you have some troubles, check the <a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/">GitHub tutorial</a> about generating SSH keys</p>
<p>Also, due to security reasons, remember to do not use your basic key and just generate a new one as you will have to upload private key to Red Hat's cloud.</p>
<p>When your key files are ready, on BitBucket go to the settings of your repository and add public key (Repositories &gt; <em>your-repository-name</em> &gt; Settings &gt; Access keys &gt; Add key).</p>
<h3 id="ghostapplication">Ghost application</h3>
<p>The second pod, we will use to run Ghost application. But before we will do it, we have to add private SSH key to the cloud and configure to use it.</p>
<pre><code class="language-bash">oc secrets new-sshauth sshsecret --ssh-privatekey=~/.ssh/&lt;key-name&gt;
oc annotate secret/sshsecret 'build.openshift.io/source-secret-match-uri-1=ssh://&lt;git-repository&gt;' --overwrite
oc link builder sshsecret
</code></pre>
<p>Next, we can try to create the app:</p>
<pre><code class="language-bash">oc new-app nodejs~&lt;git-repository&gt; g --name=ghost -e OPENSHIFT_APP_DNS="" -e OPENSHIFT_MYSQL_DB_HOST="mysql" -e OPENSHIFT_MYSQL_DB_PORT="3306" -e OPENSHIFT_APP_NAME="sampledb" -e OPENSHIFT_NODEJS_IP="0.0.0.0" -e OPENSHIFT_NODEJS_PORT="8080" -e OPENSHIFT_MYSQL_DB_USERNAME="&lt;username&gt;" -e OPENSHIFT_MYSQL_DB_PASSWORD="&lt;password&gt;"
</code></pre>
<p>It's likely that it will fail due to a problem with fetching source code from BitBucket.</p>
<p>So then call:</p>
<pre><code class="language-bash">oc patch buildConfig ghost -p '{"spec":{"source":{"sourceSecret":{"name":"sshsecret"}}}}'
</code></pre>
<p>Also, you will have to login to the OpenShift web panel and free Ghost pod if you use free tier. When it's done, rerun build.</p>
<pre><code class="language-bash">oc start-build ghost -n &lt;build-name&gt;
</code></pre>
<h3 id="routing">Routing</h3>
<p>To make your app visible, you have to configure routing.</p>
<pre><code class="language-bash">oc expose svc ghost
oc set env dc ghost OPENSHIFT_APP_DNS="&lt;your-custom-domain&gt;"
</code></pre>
<p>If you do not have your own domain, use the default one assigned by OpenShift. However, it's not too pretty.</p>
<pre><code class="language-bash">oc expose svc ghost
oc get route ghost
oc set env dc ghost OPENSHIFT_APP_DNS="&lt;from previous command below HOST/PORT&gt;"
</code></pre>
<h3 id="customdomain">Custom domain</h3>
<p>We have already started a bit domain configuration in the previous step. However, there are few things which left.</p>
<p>First, login to your domain provider website and configure <em>CMAKE</em> entry.</p>
<p>Then, login to your new ghost app and go to Navigation tab and put your domain in as a <em>Home</em> entry.</p>
<h3 id="migratingcontent">Migrating content</h3>
<p>In the Red Hat tutorial, they suggest to create persistent storage for blog images and other content. However, with the free tier, you can use only one storage which has been already taken by MySQL. Thus, I've uploaded files directly to the Ghost app pod. In example, to upload images, you can do it with the following command:</p>
<pre><code class="language-bash">oc rsync ./images/ &lt;pod-name&gt;:/opt/app-root/src/content/images
</code></pre>
<p>However, uploaded images remain there as long as pod will be alive. Thus, maybe it is better to use external service to host the images.</p>
<h3 id="sources">Sources</h3>
<ul>
<li><a href="https://blog.openshift.com/migrating-ghost-app-openshift-3/">https://blog.openshift.com/migrating-ghost-app-openshift-3/</a></li>
<li><a href="https://docs.openshift.com/enterprise/3.1/dev_guide/copy_files_to_container.html">https://docs.openshift.com/enterprise/3.1/dev_guide/copy_files_to_container.html</a></li>
<li><a href="https://docs.openshift.com/container-platform/3.5/dev_guide/builds/build_inputs.html#source-secrets-ssh-key-authentication">https://docs.openshift.com/container-platform/3.5/dev_guide/builds/build_inputs.html#source-secrets-ssh-key-authentication</a></li>
</ul>
</div>

            </section>

        </article>
    </main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="../../">aicry</a> © 2017</section>
        <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
    </footer>
</body>
